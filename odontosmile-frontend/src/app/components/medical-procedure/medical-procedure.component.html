<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Odonto Smile: Procedimientos Médicos</title>
  </head>
  <body>
    <h2>Gestión de procedimientos médicos</h2>

    <main>
      <p-button
        (click)="showDialog($event, 'Nuevo')"
        icon="pi pi-external-link"
        label="Nuevo"
      ></p-button>
      <div class="card">
        <p-table
          #dt1
          [value]="medicalProcedures"
          dataKey="id"
          [rows]="10"
          [showCurrentPageReport]="true"
          [rowsPerPageOptions]="[10, 25, 50]"
          [paginator]="true"
          currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registros"
          [globalFilterFields]="[
            'name',
            'cost'
          ]"
        >
          <ng-template pTemplate="header">
            <tr>
              <th style="min-width: 10rem">
                <div class="flex align-items-center">
                  Nombre
                  <p-columnFilter
                    type="text"
                    field="name"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 2rem">
                <div class="flex align-items-center">
                  Valor del procedimiento(COP)
                  <p-columnFilter
                    type="text"
                    field="cost"
                    display="menu"
                  ></p-columnFilter>
                </div>
              </th>
              <th style="min-width: 15rem">
                <div class="flex align-items-center">
                  Acciones
                </div>
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-medicalProcedure>
            <tr>
              <td>
                {{ medicalProcedure.name?? "" }}
              </td>

              <td>
                {{ medicalProcedure.cost?? "" }}
              </td>

              <td>
                <p-button
                  label="Ver"
                  (onClick)="showDialog(medicalProcedure, 'Ver')"
                  styleClass="p-button-success"
                ></p-button>
                <p-button
                  label="Editar"
                  (onClick)="showDialog(medicalProcedure, 'Editar')"
                  styleClass="p-button-info"
                ></p-button>
                <p-button
                  label="Eliminar"
                  (onClick)="delete(medicalProcedure)"
                  styleClass="p-button-danger"
                ></p-button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="7">No se encontraron registros.</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </main>

  </body>
</html>

<p-dialog
  header="Procedimiento médico"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '50vw', height: '200vw' }"
  [draggable]="false"
  [resizable]="false"
>
  <form (ngSubmit)="onSubmit()" #loginForm="ngForm">
    <br />
    <div>
      <span class="p-float-label">
        <input
          id="id"
          name="id"
          [style]="{ width: '100%' }"
          pInputText
          [(ngModel)]="medicalProcedure.id"
          type="number"
          disabled="true"
        />
        <label htmlFor="id">Id</label>
      </span>
    </div>
    <p-divider layout="horizontal"></p-divider>

    <div>
      <span class="p-float-label">
        <input
          id="name"
          name="name"
          [style]="{ width: '100%' }"
          pInputText
          [(ngModel)]="medicalProcedure.name"
          #nameInput="ngModel"
          required
          type="text"
          [disabled]="disabled"
        />
        <label htmlFor="name">Nombres</label>
      </span>
      <div *ngIf="submitted && !nameInput.valid" class="error">
        El campo nombres es requerido.
      </div>
    </div>
    <p-divider layout="horizontal"></p-divider>

    <div>
      <span class="p-float-label">
        <input
          id="cost"
          name="cost"
          [style]="{ width: '100%' }"
          pInputText
          [(ngModel)]="medicalProcedure.cost"
          #costInput="ngModel"
          required
          type="number"
          [disabled]="disabled"
        />
        <label htmlFor="costInput">Valor del procedimiento(COP)</label>
      </span>
      <div *ngIf="submitted && !costInput.valid" class="error">
        El campo valor es requerido.
      </div>
    </div>
    <p-divider layout="horizontal"></p-divider>
    <p-button type="submit" [hidden]="disabled">Guardar</p-button>
  </form>
</p-dialog>
